{% extends 'management/base.html' %}
{% block page_header %}Historique de connexions{% endblock %}
{% block management %}
<div class="col-md-8">
	<table class="table table-striped table-hover">
		<tr>
			<th><i class="icon-calendar"></i> Date</th>
			<th><i class="icon-cloud"></i> Serveur</th>
			<th><i class="icon-home"></i> IP d'origine</th>
		</tr>
		{% for log in logs %}
		<tr>
			<td>{{ log.date }}</td>
			<td><a href="{% url 'servers_server' log.server.name %}">{{ log.server.display_name }}</a></td>
			<td>{{ log.origin }}</td>
		</tr>
		{% endfor %}
	</table>
</div>

<div class="col-md-4">
	<div class="alert alert-info">
		{% if not optout %}
		<p><b>Désactivation de l'historique</b></p>
		<p>L'historique des connexions vous est fourni afin que vous puissiez vérifier qu'aucune activité anormale
			n'a lieu sur votre compte.</p>
		<p>Vous avez la possibilité de le désactiver ci-dessous. Il est cependant conseillé de garder un moyen
			de vérifier l'activité de votre compte.</p>
		<br />
		<form action="{% url 'management_logs' %}" method="post">
			{% csrf_token %}
			<input type="hidden" name="optout" value="1" />
			<input type="submit" class="btn btn-danger" value="Désactivation" />
		</form>
		{% else %}
		<p><b>Activation de l'historique</b></p>
		<p>L'historique des connexions vous est fourni afin que vous puissiez vérifier qu'aucune activité anormale
			n'a lieu sur votre compte.</p>
		<p>Vous avez la possibilité de l'activer ci-dessous.</p><br />
		<form action="{% url 'management_logs' %}" method="post">
			{% csrf_token %}
			<input type="hidden" name="optout" value="0" />
			<input type="submit" class="btn btn-success" value="Activation" />
		</form>
		{% endif %}
	</div>
	<div class="alert alert-warning">
		<p><b>Suppression de l'historique</b></p>
		<p>Vous avez la possibilité de supprimer l'historique des connexions présent sur cette page.</p>
		<br />
		<form action="{% url 'management_logs' %}" method="post">
			{% csrf_token %}
			<input type="hidden" name="clear_history" value="1" />
			<input type="submit" class="btn btn-danger" value="Suppression" />
		</form>
	</div>
</div>
{% endblock %}
